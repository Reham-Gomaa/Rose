<form [formGroup]="form" (ngSubmit)="handleSubmit()" class="flex flex-column gap-4">
  <!-- Name Field -->
  <app-custom-input
    [id]="nameFieldId()"
    [labelText]="nameLabel()"
    [placeholder]="namePlaceholder()"
    [errorHandilgControl]="form.get('name')!"
    formControlName="name"
  />

  <!-- Image Upload Field -->
  <div class="flex flex-column gap-2">
    <label [for]="imageFieldId()" class="label-color mt-3">
      {{ imageLabel() }} *
    </label>
    <div class="upload-wrapper">
      <input
        [id]="imageFieldId()"
        type="file"
        accept="image/*"
        (change)="onImageSelect($event)"
        class="hidden-input"
        #fileInput
      />
      <button
        type="button"
        class="upload-btn"
        (click)="fileInput.click()"
      >
        <i class="pi pi-upload"></i>
        {{ uploadButtonText() }}
      </button>
      @if (selectedFileName) {
        <span class="selected-file">{{ selectedFileName }}</span>
      }
    </div>
    @if (form.get('image')?.errors && form.get('image')?.touched) {
      <small class="error-text">Image is required</small>
    }
  </div>

  <!-- Submit Button -->
  <button
    type="submit"
    [disabled]="form.invalid || isLoading()"
    class="submit-btn"
  >
    @if (isLoading()) {
      <i class="pi pi-spin pi-spinner"></i>
    }
    {{ submitButtonText() }}
  </button>
</form>
