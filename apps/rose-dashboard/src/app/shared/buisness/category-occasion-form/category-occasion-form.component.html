<form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="p-fluid">
  <div class="flex flex-column gap-4">
    
    <!-- Name Field -->
    <lib-custom-input
      id="categoryName"
      labelText="Name *"
      placeholder="Enter category name"
      [errorHandilgControl]="nameControl"
      formControlName="name">
    </lib-custom-input>

    <!-- File Upload -->
    <div class="flex flex-column gap-2">
      <lib-custom-input
        type="file"
        accept="image/*"
        labelText="Category image *"
        placeholder="Upload file"
        [errorHandilgControl]="categoryForm.get('image') ?? undefined"
        formControlName="image"
        (change)="onFileSelected($event)">
      </lib-custom-input>

    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="btn-primary"
      [disabled]="categoryForm.invalid || isSubmitting">
      @if (isSubmitting) {
        <i class="pi pi-spin pi-spinner"></i> Saving...
      } @else {
        {{ initialData ? "Update Category" : "Add Category" }}
      }
    </button>
  </div>
</form>
