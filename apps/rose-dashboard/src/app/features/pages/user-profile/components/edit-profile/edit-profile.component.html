<div class="content">
  @if (isLoading()) {
    <div class="loading-skeleton">
      <!-- Avatar Section Skeleton -->
      <div class="skeleton-avatar-section">
        <div class="skeleton-avatar"></div>
        <div class="skeleton-upload-info">
          <div class="skeleton-text-lg"></div>
          <div class="skeleton-text-sm"></div>
        </div>
      </div>

      <!-- Form Skeleton -->
      <div class="skeleton-form">
        <div class="skeleton-row">
          <div class="skeleton-field"></div>
          <div class="skeleton-field"></div>
        </div>
        <div class="skeleton-field-wide"></div>
        <div class="skeleton-field-wide"></div>
        <div class="skeleton-field-wide"></div>
        <div class="skeleton-actions">
          <div class="skeleton-button"></div>
        </div>
      </div>
    </div>
  } @else {
    <div class="upload-section">
      <div class="avatar-container">
        @if (_userDataService.userPhoto() === defaultPhoto) {
          <div class="user-avatar">
            {{ getInitials() }}
          </div>
        } @else {
          <img
            [ngSrc]="_userDataService.userPhoto()"
            width="120"
            height="120"
            alt="User Photo"
            class="avatar-img"
            loading="lazy"
            decoding="async"
          />
        }

        <p-fileupload
          mode="basic"
          name="profilePhoto"
          chooseIcon="pi pi-cloud-upload"
          chooseLabel=""
          accept="image/*"
          maxFileSize="5000000"
          [auto]="true"
          (onSelect)="onImageUpload($event)"
          styleClass="upload-button p-button-rounded p-button-outlined"
        ></p-fileupload>
      </div>
      <div class="upload-info">
        <h3>{{ "user-Profile.edit-Profile.uploadPhoto" | translate }}</h3>
        <p>{{ "user-Profile.edit-Profile.uploadPhotoInfo" | translate }}</p>
      </div>
    </div>

    <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="profile-form">
      <div class="flex justify-content-between">
        <!-- First Name -->
        <lib-custom-input
          formControlName="firstName"
          type="text"
          [placeholder]="'auth.inputs.firstNamePlaceholder' | translate"
          id="firstName"
          [labelText]="'auth.inputs.firstName' | translate"
          class="col field"
          autocomplete="given-name"
          [errorHandilgControl]="profileForm.get('firstName')!"
          aria-required="true"
        />

        <!-- Last Name -->
        <lib-custom-input
          formControlName="lastName"
          type="text"
          placeholder="{{ 'auth.inputs.lastNamePlaceholder' | translate }}"
          id="lastName"
          labelText="{{ 'auth.inputs.lastName' | translate }}"
          [errorHandilgControl]="profileForm.get('lastName')!"
          class="col field"
          autocomplete="family-name"
          aria-required="true"
        />
      </div>

      <!-- Email -->
      <lib-custom-input
        formControlName="email"
        type="text"
        placeholder="user@example.com"
        id="email"
        labelText="{{ 'auth.inputs.email' | translate }}"
        [errorHandilgControl]="profileForm.get('email')!"
        class="w-full mb-3"
        autocomplete="email"
        aria-required="true"
      />

      <!-- Phone -->
      <lib-custom-input-phone
        formControlName="phone"
        placeholder="1012345678"
        labelText="{{ 'auth.inputs.phone' | translate }}"
        id="phone"
        class="w-full"
        [errorHandilgControl]="profileForm.get('phone')!"
        autocomplete="tel"
        aria-required="true"
      />

      <!-- Gender -->
      <div class="field">
        <label for="gender-dropdown" class="title-label">{{
          "auth.inputs.gender" | translate
        }}</label>
        <p-select
          [options]="genders"
          optionLabel="label"
          [disabled]="true"
          [placeholder]="_userDataService.userGender()"
          id="gender-dropdown"
          class="w-full"
        >
        </p-select>
      </div>
    </form>
  }
</div>
